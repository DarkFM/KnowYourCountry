(this["webpackJsonprest-countries"]=this["webpackJsonprest-countries"]||[]).push([[0],{27:function(e,t,a){e.exports=a(48)},32:function(e,t,a){},33:function(e,t,a){},34:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),s=a.n(c),i=a(14),o=(a(32),a(2)),l=a(3),u=a(5),m=a(4),p=a(6),d=a(11),h=(a(33),a(34),function(e){function t(){var e,a;Object(o.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(u.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).state={lightMode:!0},a.toggleTheme=function(){a.setState({lightMode:!a.state.lightMode})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=document.querySelector("html");this.state.lightMode?a.dataset.theme="":a.dataset.theme="dark"}},{key:"render",value:function(){return r.a.createElement("header",{className:"header"},r.a.createElement("div",{className:"container"},r.a.createElement("h3",{className:"title"},"Where in the world?"),r.a.createElement("span",{className:"theme-switch",onClick:this.toggleTheme},this.state.lightMode?r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"mode-icon light-mode"},r.a.createElement("i",{className:"fas fa-moon"})),"Dark Mode"):r.a.createElement(r.a.Fragment,null,r.a.createElement("span",{className:"mode-icon dark-mode"},r.a.createElement("i",{className:"fas fa-sun"})),"Light Mode"))))}}]),t}(r.a.Component)),f=a(7),y=a.n(f),g=a(16),v=a(12),E=(a(36),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).handleChange=function(e){var t=e.target,n=t.name,r=t.value;a.setState(Object(v.a)({},n,r))},a.state={query:a.props.initData||""},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){this.setState({query:this.props.initData})}},{key:"componentDidUpdate",value:function(e,t){var a=this.state.query;t.query!==a&&this.props.filterCountries(this.state.query.trim())}},{key:"render",value:function(){var e=this.props.placeholder;return r.a.createElement("form",{className:"search-bar"},r.a.createElement("i",{className:"fas fa-search"}),r.a.createElement("input",{className:"search-input",name:"query",type:"search","aria-label":e,value:this.state.query,onChange:this.handleChange,placeholder:e}))}}]),t}(r.a.Component));E.defaultProps={placeholder:"Search for a country..."};var b=E,N=(a(37),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).toggleDropdown=function(){a.setState((function(e){return{showItems:!e.showItems}}))},a.handleSelect=function(e){var t=e.target.dataset.value;a.setState({selectedItem:t}),a.toggleDropdown()},a.state={showItems:!1,selectedItem:a.props.initData},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this.state.selectedItem;t.selectedItem!==a&&this.props.getSelectedItem(a)}},{key:"render",value:function(){var e=this,t=this.state,a=t.showItems,n=t.selectedItem;return r.a.createElement("div",{className:"dropdown"},r.a.createElement("div",{className:"toggle-list",onClick:this.toggleDropdown},r.a.createElement("span",{className:"title-text"},n||"Filter by Region"),r.a.createElement("i",{className:"fas fa-chevron-down"})),a&&r.a.createElement("ul",{className:"dropdown-items"},this.props.dropdownItems.map((function(t){return r.a.createElement("li",{key:t,onClick:e.handleSelect,className:"dropdown-item","data-value":t},t)}))))}}]),t}(r.a.Component)),O=(a(38),a(26)),j=a(18);function w(e,t){window.sessionStorage.setItem(t,JSON.stringify(e))}function k(e){var t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:if(t=JSON.parse(window.sessionStorage.getItem(e))){a.next=6;break}return a.next=4,y.a.awrap(C());case 4:w(t=a.sent,e);case 6:return a.abrupt("return",t);case 7:case"end":return a.stop()}}))}function C(){var e,t,a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=new Request("https://restcountries.eu/rest/v2/all"),n.next=3,y.a.awrap(fetch(e));case 3:return t=n.sent,n.next=6,y.a.awrap(t.json());case 6:return a=n.sent,n.abrupt("return",a.reduce((function(e,t){return e[t.alpha3Code]=t,e}),{}));case 8:case"end":return n.stop()}}))}function S(e){return e?Object(g.a)(e.toString()).reverse().reduce((function(e,t,a){return a%3===0&&0!==a?t+","+e:t+e})):""}var I=function(e){var t=Object.keys(e).reduce((function(t,a){return t.add(e[a].region)}),new Set);return Object(g.a)(t)};function x(e,t,a){var n,r,c=e.indexOf("?");if(n=e.substring(0,c),!(r=e.substring(c+1))||!r.includes("=")||c<0)return e.replace("?","")+"?"+t+"="+a;var s,i=D(r),o=Object(j.a)({},i,Object(v.a)({},t,a));return n+"?"+(s=o,Object.keys(s).reduce((function(e,t){return s[t]?e+"".concat(t,"=").concat(s[t],"&"):e}),"").trim().replace(/&$/g,""))}function D(e){return e.split("&").reduce((function(e,t){var a=t.split("="),n=Object(O.a)(a,2),r=n[0],c=n[1];return Object(j.a)({},e,Object(v.a)({},r,c))}),{})}a(39);var Q=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,a=e.countryName,n=e.population,c=e.capital,s=e.region,i=e.flagImg,o=e.history,l=e.highlightDetails,u=S(n),m=l||{},p=m.index,d=m.length;return r.a.createElement("div",{className:"country-item",onClick:function(){return o.push("/country/".concat(t))}},r.a.createElement("div",{className:"img-container"},r.a.createElement("img",{src:i,alt:a})),r.a.createElement("div",{className:"details"},r.a.createElement("header",null,l?r.a.createElement(r.a.Fragment,null,a.substring(0,p),r.a.createElement("span",{className:"highlight"},a.substring(p,p+d)),a.substring(p+d)):a),r.a.createElement("p",{className:"country-detail"},r.a.createElement("span",{className:"detail-title"},"Population: "),r.a.createElement("span",{className:"detail-description"},u||"Unknown")),r.a.createElement("p",{className:"country-detail"},r.a.createElement("span",{className:"detail-title"},"Region: "),r.a.createElement("span",{className:"detail-description"},s||"Unknown")),r.a.createElement("p",{className:"country-detail"},r.a.createElement("span",{className:"detail-title"},"Capital: "),r.a.createElement("span",{className:"detail-description"},c||"Unknown"))))}}]),t}(r.a.Component);Q.defaultProps={countryName:"Germany",population:81770900,capital:"Berlin",region:"Europe",flagImg:"sdsd"};var A=Object(d.f)(Q),R=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"country-list"},this.props.countries.map((function(e){return r.a.createElement(A,{key:e.alpha3Code,id:e.alpha3Code,countryName:e.name,population:e.population,capital:e.capital,region:e.region,flagImg:e.flag,highlightDetails:e.search})})))}}]),t}(r.a.Component),U=(a(45),{All:"All",Africa:"Africa",Americas:"Americas",Asia:"Asia",Europe:"Europe",Oceania:"Oceania",Polar:"Polar"}),q=2,M=500,B=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).resetQuery=null,a.updateSearchQuery=function(e){e.length>=q?(a.resetQuery(e),a.setState({searchQuery:e})):(a.resetQuery(""),a.setState({searchQuery:""}))},a.getRegionFilter=function(e){a.setState({regionQuery:e});var t=x(window.location.search,"region",e);a.props.history.push(t)},a.setQueryString=function(){var e=null;return function(t){window.clearTimeout(e);var n=x(window.location.search,"query",t);e=window.setTimeout((function(){a.props.history.push(n)}),M)}},a.filterByRegion=function(e,t){return t.filter((function(t){return e===U.All||t.region.toLowerCase().includes(e.toLowerCase())}))},a.filterBySearch=function(e,t){var a=e.length;return t.filter((function(t){var n=e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),r=new RegExp(n,"gi"),c=t.name.search(r);return delete t.search,!(c<0)&&(a>0&&(t.search={index:c,length:a}),!0)}))},a.resetQuery=a.setQueryString();var n=a.props.location,r="",c="";if(n.search.trim()){var s=D(n.search.replace("?",""));r=window.decodeURIComponent(s.query||""),c=window.decodeURIComponent(s.region||"")}return a.state={searchQuery:r,regionQuery:c,allRegions:[],countriesArray:[]},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e,t,a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,y.a.awrap(k("countries-list"));case 2:e=n.sent,t=["All"].concat(Object(g.a)(I(e).sort())),a=Object.keys(e).map((function(t){return e[t]})),this.setState({allRegions:t,countriesArray:a});case 6:case"end":return n.stop()}}),null,this)}},{key:"render",value:function(){var e=this.state,t=e.countriesArray,a=e.searchQuery,n=e.regionQuery,c=this.filterBySearch(a,this.filterByRegion(n,t));return r.a.createElement("div",{className:"homepage"},r.a.createElement("div",{className:"menu"},r.a.createElement(b,{filterCountries:this.updateSearchQuery,initData:this.state.searchQuery}),r.a.createElement(N,{dropdownItems:this.state.allRegions,initData:this.state.regionQuery,getSelectedItem:this.getRegionFilter})),r.a.createElement(R,{countries:c}))}}]),t}(r.a.Component),F=(a(46),function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.country||{},t=e.name,a=e.flag,n=e.nativeName,c=e.population,s=e.region,o=e.subregion,l=e.capital,u=e.topLevelDomain,m=e.currencies,p=e.languages,d=this.props.borders,h=d.length>0?d:[{name:"None",code:this.props.countryId}],f=m.map((function(e){return e.name})),y=p.map((function(e){return e.name}));return r.a.createElement("div",{className:"country-details"},r.a.createElement("div",{className:"country-img"},r.a.createElement("img",{src:a,alt:"flag of ".concat(t)})),r.a.createElement("div",{className:"details-container"},r.a.createElement("header",null,t),r.a.createElement("div",{className:"details"},r.a.createElement("p",{className:"country-detail"},r.a.createElement("span",{className:"detail-title"},"Native Name: "),r.a.createElement("span",{className:"detail-description"},n)),r.a.createElement("p",{className:"country-detail"},r.a.createElement("span",{className:"detail-title"},"Population: "),r.a.createElement("span",{className:"detail-description"},S(c))),r.a.createElement("p",{className:"country-detail"},r.a.createElement("span",{className:"detail-title"},"Region: "),r.a.createElement("span",{className:"detail-description"},s)),r.a.createElement("p",{className:"country-detail"},r.a.createElement("span",{className:"detail-title"},"Sub Region: "),r.a.createElement("span",{className:"detail-description"},o)),r.a.createElement("p",{className:"country-detail"},r.a.createElement("span",{className:"detail-title"},"Capital: "),r.a.createElement("span",{className:"detail-description"},l)),r.a.createElement("p",{className:"country-detail"},r.a.createElement("span",{className:"detail-title"},"Top Level Domain: "),r.a.createElement("span",{className:"detail-description"},u)),r.a.createElement("p",{className:"country-detail"},r.a.createElement("span",{className:"detail-title"},"Currencies: "),r.a.createElement("span",{className:"detail-description"},f.length>0&&f.join(", "))),r.a.createElement("p",{className:"country-detail"},r.a.createElement("span",{className:"detail-title"},"Languages: "),r.a.createElement("span",{className:"detail-description"},y.length>0&&y.join(", ")))),r.a.createElement("div",{className:"country-tags"},r.a.createElement("span",{className:"detail-title"},"Border Countries: "),r.a.createElement("div",{className:"tag-container"},h.length>0&&h.map((function(e){return r.a.createElement(i.b,{to:"/country/".concat(e.code),key:e.code,className:"tag"},e.name)}))))))}}]),t}(r.a.Component)),L=Object(d.f)(F),P=(a(47),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(m.a)(t).call(this,e))).state={country:null,borders:[],countryId:a.props.match.params.countryId},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e,t;return y.a.async((function(a){for(;;)switch(a.prev=a.next){case 0:return e=this.props.match,t=e.params.countryId.toUpperCase(),a.next=4,y.a.awrap(this.updateState(t));case 4:case"end":return a.stop()}}),null,this)}},{key:"componentDidUpdate",value:function(e){var t,a;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:if(t=e.match.params.countryId.toUpperCase(),(a=this.props.match.params.countryId.toUpperCase())===t){n.next=5;break}return n.next=5,y.a.awrap(this.updateState(a));case 5:case"end":return n.stop()}}),null,this)}},{key:"updateState",value:function(e){var t,a,n;return y.a.async((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,y.a.awrap(k("countries-list"));case 2:t=r.sent,a=t[e],n=a.borders.map((function(e){return{name:t[e].name,code:e}})),this.setState((function(t){return{country:a,borders:n,countryId:e}}));case 6:case"end":return r.stop()}}),null,this)}},{key:"render",value:function(){var e=this,t=this.state,a=t.country,n=t.borders;return r.a.createElement("div",{className:"country-detail-page"},r.a.createElement("button",{className:"go-back",onClick:function(){return e.props.history.push("/")}}," ","\u2936 Back"),this.state.country&&r.a.createElement(L,{borders:n,country:a,countryId:this.state.countryId}))}}]),t}(r.a.Component)),T=function(e){function t(){return Object(o.a)(this,t),Object(u.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"App"},r.a.createElement(h,null),r.a.createElement(d.c,null,r.a.createElement(d.a,{exact:!0,path:"/",component:B}),r.a.createElement(d.a,{path:"/country/:countryId",component:P})))}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(i.a,null,r.a.createElement(T,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[27,1,2]]]);
//# sourceMappingURL=main.b2537ed4.chunk.js.map